<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://kit.fontawesome.com/df2eef8f6b.js" crossorigin="anonymous"></script>
</head>
<body>
<div th:replace="/../fragments/header :: header"> </div>
<nav class="navbar navbar-inverse">
    <div class="container-fluid text-center">
        <a class="navbar-brand">
            <img th:src="@{~/images/logo_small.jpeg}" alt="image not found" style="width:40px;"/>
        </a>
        <a class="navbar-brand" th:href="@{#}"> User</a>
        <a class="navbar-brand" th:href="@{#}"> Post</a>
        <form class="navbar-form navbar-left" action="#" th:action="@{/search}" th:object="${searchRequest}" method="post">
            <input type="text" th:field="*{term}" class="form-control mb-3" id="term" placeholder="term to search">
            <button type="submit" class="btn btn-primary">Search</button>
        </form>

        <div sec:authorize="isAuthenticated()">
            <ul class="nav navbar-nav navbar-right">
                <li><a th:href="@{~/login}"><span class="glyphicon glyphicon-log-in"></span> Logout</a></li>
            </ul>
        </div>

        <div sec:authorize="!isAuthenticated()">
            <ul class="nav navbar-nav navbar-right">
                <li><a th:href="@{~/login}"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
            </ul>
        </div>

        <div sec:authorize="isAuthenticated()">
            <p class="navbar-brand navbar-right">Xin chào <span th:text="${user.fullname}"> User</span></p>
            <p class="navbar-brand navbar-right">   </p>
        </div>


        <ul class="nav navbar-nav navbar-right">
            <li><a class="nav navbar-nav navbar-toggler " th:href="@{#}">
                <img th:src="@{~/images/icon_jp.png}" alt="image not found" style="width:40px;"/>
            </a>
            </li>
            <li> <a class="nav navbar-nav navbar-toggler " th:href="@{#}">
                <img th:src="@{~/images/icon_vn.png}" alt="image not found" style="width:40px;"/>

            </a>
            </li>
        </ul>

    </div>
</nav>
<h1>Day la trang admin</h1>
<div class="container">
    <div class="row">
        <div class="col-sm-9">
            <table class="table table-bordered">
                <thead class="thead-dark">
                <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Fullname</th>
                    <th scope="col">Email</th>
                    <th scope="col">Post</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="user:${userList}">
                    <th scope="row" th:text="${user.id}">id</th>
                    <td th:text="${user.fullname}">fullname</td>
                    <td th:text="${user.email}">email</td>
                    <td th:text="${user.posts.size()}">post</td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="col-sm-3">
            bbb
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-6">
            <div id="chart"></div>
        </div>
    </div>
</div>

<!-- you need to include the shieldui css and js assets in order for the charts to work -->
<link rel="stylesheet" type="text/css" href="http://www.shieldui.com/shared/components/latest/css/light-bootstrap/all.min.css" />
<script type="text/javascript" src="http://www.shieldui.com/shared/components/latest/js/shieldui-all.min.js"></script>

<script th:inline="javascript" type="text/javascript">
    jQuery(function ($) {
    var N5 = [[${totalN5}]];
    var N4 = [[${totalN4}]];
    var N3 = [[${totalN3}]];
    var N2 = [[${totalN2}]];
    var N1 = [[${totalN1}]];

        $("#chart").shieldChart({
            theme: "bootstrap",
            exportOptions: {
                image: false,
                print: false
            },
            seriesSettings: {
                bar: {
                    stackMode: "normal"
                }
            },
            axisX: {
                categoricalValues: [
                    "N5 ", "N4 ", "N3 ", "N2 ", "N1 ", "Tiếng nhật IT ", "Java cơ bản ", "Spring Boot"
                ]
            },
            primaryHeader: {
                text: "Số lượng bài viết của mỗi thể loại "
            },
            dataSeries: [{
                seriesType: "bar",
                collectionAlias: "Gold Medals",
                data: [N5,N4,N3,N2,N1,6,7,8]
            }]
        });
    });
</script>


</body>
</html>